<div class="fixed left-0 top-0 h-full z-20">
  <!-- Collapsed Sidebar -->
  @if (!isOpen) {
    <div @slideInOut class="w-12 bg-[var(--surface)] h-full flex flex-col border-r border-[var(--background)]">
      <button (click)="toggleSidebar()" class="p-3 hover:bg-[var(--primary)] hover:text-white transition-colors">
        <span class="material-icons">menu</span>
      </button>
    </div>
  }

  <!-- Expanded Sidebar -->
  @if (isOpen) {
    <div @slideInOut class="w-64 bg-[var(--surface)] text-[var(--text)] h-full flex flex-col border-r border-[var(--background)]">
      <div class="p-4 border-b border-[var(--background)] flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <button (click)="toggleSidebar()" class="p-1 rounded-lg hover:bg-[var(--primary)] hover:text-white transition-colors">
            <span class="material-icons">menu</span>
          </button>
          <h2 class="text-xl font-bold bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] bg-clip-text text-transparent">
            <a routerLink="/admin/dashboard">{{ 'ADMIN_SIDEBAR.DASHBOARD' | translate }}</a>
          </h2>
        </div>
      </div>

      <div class="flex-1 overflow-y-auto p-4">
        <nav class="space-y-2 h-full">
          @for (item of menuItems; track item.title) {
            <div class="rounded-lg overflow-hidden">
              <button
                [class.text-[var(--primary)]]="isParentActive(item)"
                (click)="item.subItems!.length > 0 ? toggleItem(item) : navigateTo(item.link!)"
                class="w-full flex items-center justify-between p-3 hover:bg-[var(--primary)] hover:text-white transition-colors duration-200 rounded-lg"
              >
                <div class="flex items-center space-x-3">
                  <span class="material-icons">{{ item.icon }}</span>
                  <span>{{ item.title | translate }}</span>
                </div>
                @if (item.subItems.length > 0) {
                  <span class="material-icons transform transition-transform duration-200" [class.rotate-180]="item.expanded">
                    expand_more
                  </span>
                }
              </button>

              @if (item.expanded) {
                <div @expandAnimation class="space-y-1 bg-[var(--background)]">
                  @for (subItem of item.subItems; track subItem.title) {
                    <a 
                      [routerLink]="subItem.link"
                      routerLinkActive="bg-[var(--primary)] text-white"
                      [routerLinkActiveOptions]="{ exact: true }"
                      class="flex items-center gap-2 p-2 pl-12 hover:bg-[var(--primary)] hover:text-white rounded transition-colors duration-200"
                    >
                      <span class="material-icons ml-[-20px]">{{ subItem.icon }}</span>
                      {{ subItem.title | translate }}
                    </a>
                  }
                </div>
              }
            </div>
          }
        </nav>
      </div>
    </div>
  }
</div>
