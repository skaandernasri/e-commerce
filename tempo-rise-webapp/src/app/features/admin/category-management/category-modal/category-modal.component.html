<div class="fixed inset-0 z-50 flex items-center justify-center p-4"
     role="dialog"
     aria-modal="true">
  
  <!-- Modal Container -->
  <div @fadeInUp class="relative w-full max-w-md bg-[var(--surface)] rounded-xl shadow-2xl overflow-hidden border border-[var(--background)]">
    
    <!-- Header -->
    <div class="bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] p-4">
      <h2 class="text-xl font-bold text-white">
        {{ isEditMode ? 'Edit Category' : 'Create New Category' }}
      </h2>
    </div>

    <!-- Content -->
    <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="p-6 space-y-6">
      <!-- Name Field -->
      <div class="space-y-2">
        <label class="block text-sm font-medium text-[var(--text)]">Name*</label>
        <input
          type="text"
          formControlName="nom"
          class="w-full px-4 py-2 rounded-lg border border-[var(--background)] focus:border-[var(--primary)] focus:ring-2 focus:ring-[var(--primary)/20] bg-[var(--surface)] text-[var(--text)]"
          placeholder="Enter category name"
        >
        @if (categoryForm.get('nom')?.invalid && categoryForm.get('nom')?.touched) {
          <div class="text-red-500 text-xs mt-1">
            @if (categoryForm.get('nom')?.errors?.['required']) {
              <p>Name is required</p>
            }
            @if (categoryForm.get('nom')?.errors?.['minlength']) {
              <p>Name must be at least 2 characters</p>
            }
          </div>
        }
      </div>

      <!-- Description Field -->
      <div class="space-y-2">
        <label class="block text-sm font-medium text-[var(--text)]">Description</label>
        <textarea
          formControlName="description"
          rows="3"
          class="w-full px-4 py-2 rounded-lg border border-[var(--background)] focus:border-[var(--primary)] focus:ring-2 focus:ring-[var(--primary)/20] bg-[var(--surface)] text-[var(--text)]"
          placeholder="Enter description (optional)"
        ></textarea>
      </div>

      <!-- Footer -->
      <div class="bg-[var(--background)] px-6 py-4 border-t border-[var(--border)] flex justify-end gap-3">
        <button
          type="button"
          (click)="onCancel()"
          class="px-4 py-2 text-sm font-medium text-[var(--text)] hover:text-[var(--primary)] transition-colors"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="categoryForm.invalid || isLoading"
          class="px-4 py-2 bg-[var(--primary)] text-white text-sm font-medium rounded-md hover:bg-[var(--secondary)] transition-colors flex items-center gap-2 disabled:opacity-50"
        >
          @if (!isLoading) {
            <span>{{ isEditMode ? 'Update' : 'Create' }}</span>
          }
          @else { 
            <span class="animate-spin">â†»</span>
          }
        </button>
      </div>
    </form>
  </div>
</div>