<form [formGroup]="blogForm" (ngSubmit)="submitBlog()" class="w-screen h-screen flex flex-col bg-[var(--background)] overflow-y-auto -mx-4">
  
  <!-- Header Section -->
  <div class="px-4 sm:px-6 md:px-8 pt-6 pb-4 border-b border-gray-200">
    <h1 class="text-2xl sm:text-3xl font-bold text-[var(--text)]">CrÃ©er un article</h1>
    <p class="text-sm text-gray-500 mt-1">Remplissez les informations ci-dessous pour crÃ©er votre article</p>
  </div>

  <!-- Form Content -->
  <div class="flex-1 overflow-y-auto px-4 sm:px-6 md:px-8 py-6 space-y-6">
    
    <!-- Titre -->
    <div class="space-y-2">
      <label for="titre" class="block text-[var(--text)] font-semibold text-sm sm:text-base">
        Titre <span class="text-red-500">*</span>
      </label>
      <input 
        id="titre" 
        formControlName="titre" 
        required 
        placeholder="Entrez le titre de l'article"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent bg-white text-[var(--text)] text-sm sm:text-base outline-none transition-all duration-200 placeholder:text-gray-400"
      />
    </div>

    <!-- Contenu -->
    <div class="space-y-2 flex-1 flex flex-col min-h-[400px]">
      <label for="contenu" class="block text-[var(--text)] font-semibold text-sm sm:text-base">
        Contenu <span class="text-red-500">*</span>
      </label>
      <div class=" border-gray-300 rounded-lg overflow-hidden hover:border-[var(--primary)] transition-colors duration-200 bg-white shadow-sm"
           [class.border-red-500]="blogForm.get('contenu')?.invalid && blogForm.get('contenu')?.touched">
        <!-- Toolbar -->
        <div id="toolbar" class="border-b border-gray-200 p-2 bg-gray-50 flex flex-wrap gap-1">

          <span class="ql-formats flex gap-1">
            <button id="insertRowAboveBtn" type="button" title="InsÃ©rer ligne au-dessus"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100 transition-all">Ligne â†‘</button>
            <button id="insertRowBelowBtn" type="button" title="InsÃ©rer ligne en-dessous"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100 transition-all">Ligne â†“</button>
            <button id="insertColumnLeftBtn" type="button" title="InsÃ©rer colonne Ã  gauche"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100 transition-all">Col â†</button>
            <button id="insertColumnRightBtn" type="button" title="InsÃ©rer colonne Ã  droite"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100 transition-all">Col â†’</button>
            <button id="deleteRowBtn" type="button" title="Supprimer ligne"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100 transition-all">Suppr Ligne</button>
            <button id="deleteColumnBtn" type="button" title="Supprimer colonne"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100 transition-all">Suppr Col</button>
            <button id="deleteTableBtn" type="button" title="Supprimer tableau"
                    class="px-2 h-7 text-xs font-semibold bg-white border border-red-300 rounded hover:bg-red-50 transition-all text-red-600">Suppr Table</button>
          </span>

          <span class="ql-formats flex gap-1">
            <button class="ql-link w-7 h-7 hover:bg-gray-200 rounded transition-colors" type="button"></button>
            <button class="ql-image w-7 h-7 hover:bg-gray-200 rounded transition-colors" type="button"></button>
            <button class="ql-video w-7 h-7 hover:bg-gray-200 rounded transition-colors" type="button"></button>
            <button class="ql-clean w-7 h-7 hover:bg-gray-200 rounded transition-colors" type="button"></button>
          </span>
        </div>

      <div class="border border-gray-300 rounded-lg overflow-hidden hover:border-[var(--primary)] transition-colors duration-200 flex-1 flex flex-col bg-white shadow-sm">
        <quill-editor
          #quillEditor
          formControlName="contenu"
          [modules]="modules"
          theme="snow"
          placeholder="Ã‰crivez votre article ici... Utilisez la barre d'outils pour formater le texte."
          class="w-full h-full"
          (onEditorCreated)="onEditorCreated($event)"
        ></quill-editor>
      </div>
    </div>
    </div>
    <!-- Two Column Layout for Status and Image -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      
      <!-- Statut -->
      <div class="space-y-2">
        <label for="status" class="block text-[var(--text)] font-semibold text-sm sm:text-base">
          Statut <span class="text-red-500">*</span>
        </label>
        <select 
          id="status" 
          formControlName="status"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent bg-white text-[var(--text)] text-sm sm:text-base outline-none cursor-pointer transition-all duration-200"
        >
          <option value="BROUILLON">ğŸ“ Brouillon</option>
          <option value="PUBLIER">âœ… PubliÃ©</option>
          <option value="ARCHIVE">ğŸ“¦ ArchivÃ©</option>
        </select>
      </div>
      
      <!-- Image -->
      <div class="space-y-2">
        <label for="image" class="block text-[var(--text)] font-semibold text-sm sm:text-base">
          Image de couverture
        </label>
        <input 
          type="file" 
          id="image" 
          (change)="onFileSelected($event)"
          accept="image/*"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[var(--primary)] file:text-white hover:file:brightness-110 cursor-pointer bg-white text-[var(--text)] text-sm sm:text-base transition-all duration-200"
        />
      </div>
    
    </div>

  </div>

  <!-- Footer with Actions -->
  <div class="px-4 sm:px-6 md:px-8 py-4 border-t border-gray-200 bg-gray-50 flex flex-col sm:flex-row gap-3 sm:justify-end">
    <button 
      type="button"
      class="w-full sm:w-auto px-6 py-3 font-semibold rounded-lg border-2 border-gray-300 text-[var(--text)] hover:bg-gray-100 transition-all duration-200 order-2 sm:order-1"
    >
      Annuler
    </button>
    <button 
      type="submit" 
      [disabled]="blogForm.invalid"
      class="w-full sm:w-auto px-6 py-3 font-semibold rounded-lg bg-[var(--primary)] text-white hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg order-1 sm:order-2"
    >
      Publier l'article
    </button>
  </div>

  <!-- Success Message -->
    <p>{{ successMessage }}</p>

</form>