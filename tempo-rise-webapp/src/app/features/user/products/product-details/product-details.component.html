@if (product(); as prod) {
  <div class="flex flex-col gap-8 md:gap-12 px-4 sm:px-6 lg:px-8">
    @if(activeProductDetailsMainSections()){
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 lg:gap-12">
      <!-- Image Gallery -->
      @if (prod.imageProduits.length > 0) {
        <div class="space-y-4 md:space-y-6">
          <!-- Main Image -->
          <div class="relative w-full max-w-[600px] mx-auto aspect-square overflow-hidden rounded-xl border border-[var(--surface)] shadow-sm">
            @for (img of prod.imageProduits; track img.id; let i = $index) {
              <img 
                [src]="imagesBaseUrl + img.url" 
                [alt]="prod.nom"
                class="absolute inset-0 w-full h-full object-contain transition-opacity duration-300"
                [class.opacity-100]="currentImageIndex === i" 
                [class.opacity-0]="currentImageIndex !== i"
                loading="lazy" />
            }
          </div>

          <!-- Thumbnail Gallery -->
          <div class="flex gap-2 md:gap-3 justify-center overflow-x-auto pb-2">
            @for (img of prod.imageProduits; track img.id; let i = $index) {
              <button 
                (click)="changeImage(i)"
                type="button"
                [attr.aria-label]="'View image ' + (i + 1)"
                class="w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-lg overflow-hidden border-2 transition-all flex-shrink-0"
                [class.border-[var(--primary)]]="currentImageIndex === i"
                [class.border-transparent]="currentImageIndex !== i">
                <img 
                  [src]="imagesBaseUrl + img.url" 
                  alt="Thumbnail" 
                  class="w-full h-full object-cover" 
                  loading="lazy" />
              </button>
            }
          </div>
        </div>
      } @else {
        <div class="flex items-center justify-center aspect-square">
          <img 
            src="/assets/images/no-image.png" 
            alt="No Image Available" 
            class="w-full h-full object-contain max-w-[600px]" />
        </div>
      }

      <!-- Product Info -->
      <div class="space-y-4 md:space-y-6">
        <!-- Breadcrumbs -->
        <nav aria-label="Breadcrumb" class="text-xs sm:text-sm opacity-60 overflow-x-auto whitespace-nowrap pb-2">
          <a href="/" class="hover:text-[var(--primary)] transition-colors">
            {{ 'PRODUCT_DETAILS.BREADCRUMB_HOME' | translate }}
          </a>
          <span class="mx-1">/</span>
          <a href="/products" class="hover:text-[var(--primary)] transition-colors">
            {{ 'PRODUCT_DETAILS.BREADCRUMB_PRODUCTS' | translate }}
          </a>
          <span class="mx-1">/</span>
          <span class="text-[var(--primary)] font-medium break-words max-w-full">{{ prod.nom }}</span>
        </nav>

        <!-- Product Title -->
<h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold leading-tight break-words max-w-full">
  {{ prod.nom }}
</h1>

        <!-- Reviews Summary -->
        <div class="flex items-center gap-2 flex-wrap">
          <app-rating 
            [rating]="averageRating()" 
            [reviewCount]="totalElements" 
            size="lg">
          </app-rating>
          @if (totalElements > 0) {
            <span class="text-xs sm:text-sm text-gray-500">
              ({{ totalElements }} {{ 'PRODUCT_DETAILS.REVIEWS' | translate }})
            </span>
          }
        </div>

        <!-- Pricing -->
        <div>
          @if (hasActivePromo() && currentPromotion(); as promo) {
            <div class="flex flex-wrap items-center gap-2 sm:gap-4">
              <span class="text-2xl sm:text-3xl font-bold text-[var(--primary)]">
                {{ discountedPrice() | currencyFormat }}
              </span>
              <span class="text-base sm:text-lg opacity-50 line-through">
                {{ prod.prix | currencyFormat }}
              </span>
              <span class="bg-[var(--secondary)] text-xs font-medium px-2 py-1 rounded">
                @if (promo.type === 'PERCENTAGE') {
                  -{{ promo.reduction }}%
                } @else {
                  -{{ promo.reduction | currencyFormat }}
                }
              </span>
            </div>
          } @else {
            <span class="text-2xl sm:text-3xl font-bold">{{ prod.prix | currencyFormat }}</span>
          }
        </div>

        <!-- Variants -->
        <div class="space-y-4 md:space-y-6">
          <!-- Size Selection -->
          <div>
            <label class="block text-sm font-medium mb-2">
              {{ 'PRODUCT_DETAILS.SIZE' | translate }}
            </label>
            <div class="flex flex-wrap gap-2">
              @for (size of uniqueSizes(); track size) {
                <button 
                  (click)="clickOnSize(size)"
                  type="button"
                  [disabled]="isSizeUnavailable(size) || (selectedColor() && !availableSizesForSelectedColor().includes(size))"
                  class="px-3 py-2 sm:px-4 sm:py-2 rounded-md border text-xs sm:text-sm font-medium transition-colors"
                  [class.bg-[var(--primary)]]="selectedSize() === size && !isSizeUnavailable(size) && (!selectedColor() || availableSizesForSelectedColor().includes(size))"
                  [class.text-white]="selectedSize() === size && !isSizeUnavailable(size) && (!selectedColor() || availableSizesForSelectedColor().includes(size))"
                  [class.border-[var(--primary)]]="selectedSize() === size && !isSizeUnavailable(size) && (!selectedColor() || availableSizesForSelectedColor().includes(size))"
                  [class.border-[var(--surface)]]="selectedSize() !== size || isSizeUnavailable(size) || (selectedColor() && !availableSizesForSelectedColor().includes(size))"
                  [class.hover:border-[var(--primary)]]="selectedSize() !== size && !isSizeUnavailable(size) && (!selectedColor() || availableSizesForSelectedColor().includes(size))"
                  [class.cursor-not-allowed]="isSizeUnavailable(size) || (selectedColor() && !availableSizesForSelectedColor().includes(size))"
                  [class.opacity-50]="isSizeUnavailable(size) || (selectedColor() && !availableSizesForSelectedColor().includes(size))"
                  [class.line-through]="isSizeUnavailable(size) || (selectedColor() && !availableSizesForSelectedColor().includes(size))">
                  {{ size }}
                </button>
              }
            </div>
          </div>

          <!-- Color Selection -->
          <div>
            <label class="block text-sm font-medium mb-2">
              {{ 'PRODUCT_DETAILS.COLOR' | translate }}
            </label>
            <div class="flex items-center gap-2 sm:gap-3 flex-wrap">
              @for (color of uniqueColors(); track color) {
                <div class="relative flex items-center justify-center">

  <div
    class="absolute rounded-full ring-4 ring-[var(--primary)] transition-all duration-300 ease-in-out"
    [class.opacity-0]="!colorIsActive(color)"
    [class.scale-75]="!colorIsActive(color)"
    [class.opacity-100]="colorIsActive(color)"
    [class.scale-110]="colorIsActive(color)"
    style="width: 100%; height: 100%;"
  ></div>

                <button 
                  (click)="clickOnColor(color)"
                  type="button"
                  [title]="color"
                  [disabled]="colorIsInActiveSize(color)"
                  class="w-7 h-7 sm:w-8 sm:h-8 rounded-full border-2 relative"
                  [style.background-color]="color"
                  [class.cursor-not-allowed]="colorIsInActiveSize(color)"
                  [class.opacity-50]="colorIsInActiveSize(color)"
                  >
                  @if (colorIsInActiveSize(color)) {
                    <span class="absolute inset-0 flex items-center justify-center">
                      <svg class="w-5 h-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </span>
                  }
                </button>
              </div>

              }
            </div>
          </div>
        </div>

        <!-- Quantity Selector -->
        <div>
          <h3 class="text-sm font-medium mb-2">
            {{ 'PRODUCT_DETAILS.QUANTITY' | translate }}
          </h3>
          <div class="flex items-center border border-[var(--surface)] rounded-lg w-max">
            <button 
              type="button"
              class="px-3 py-2 hover:bg-[var(--surface)] transition-colors touch-manipulation disabled:opacity-50 disabled:cursor-not-allowed" 
              (click)="decrementQuantity()" 
              [disabled]="quantity() <= 1"
              aria-label="Decrease quantity">
              <svg class="h-4 w-4 sm:h-5 sm:w-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
              </svg>
            </button>
            <span class="px-3 py-2 sm:px-4 text-sm sm:text-base min-w-[3rem] text-center">
              {{ quantity() }}
            </span>
            <button 
              type="button"
              class="px-3 py-2 hover:bg-[var(--surface)] transition-colors touch-manipulation disabled:opacity-50 disabled:cursor-not-allowed" 
              (click)="incrementQuantity()"
              [disabled]="!selectedVariant() || quantity() >= (selectedVariant()?.availableQuantity ?? 0)"
              aria-label="Increase quantity">
              <svg class="h-4 w-4 sm:h-5 sm:w-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="space-y-3 sm:space-y-4">
          <!-- Add to Cart Button -->
          <button 
            type="button"
            class="w-full bg-[var(--primary)] text-white px-6 py-3 sm:py-4 rounded-lg hover:bg-opacity-90 transition-colors font-semibold disabled:opacity-60 disabled:cursor-not-allowed text-sm sm:text-base touch-manipulation"
            (click)="addToCart()"
            [disabled]="!selectedVariant() || (selectedVariant()?.availableQuantity ?? 0) <= 0 || addToCartButtonIsLoading">
            @if (!selectedVariant()) {
              @if (!selectedSize() && selectedColor()) {
                {{ 'PRODUCT_DETAILS.SELECT_SIZE' | translate }}
              } @else if (selectedSize() && !selectedColor()) {
                {{ 'PRODUCT_DETAILS.SELECT_COLOR' | translate }}
              } @else {
                {{ 'PRODUCT_DETAILS.SELECT_SIZE_COLOR' | translate }}
              }
            } @else {
              @if ((selectedVariant()?.availableQuantity ?? 0) > 0) {
                {{ 'PRODUCT_DETAILS.ADD_TO_CART' | translate }}
              } @else {
                {{ 'PRODUCT_DETAILS.OUT_OF_STOCK' | translate }}
              }
            }
          </button>

          <!-- Add to Wishlist Button -->
          <button 
            type="button"
            class="w-full bg-[var(--primary)] text-white px-6 py-3 sm:py-4 rounded-lg hover:bg-opacity-90 transition-colors font-semibold text-sm sm:text-base touch-manipulation disabled:opacity-60 disabled:cursor-not-allowed"
            (click)="addItemToWishlist()"
            [disabled]="!isLoggedIn">
            {{ 'PRODUCT_DETAILS.ADD_TO_WISHLIST' | translate }}
          </button>
        </div>
      </div>
    </div>
}
    <!-- Product Information Tabs -->
     @if(activeProductDetailsDescriptionSections()){
    <section class="w-full max-w-5xl mx-auto">
      <!-- Tab Headers -->
      <div class="grid grid-cols-4 rounded-t-xl overflow-hidden" role="tablist">
        @for (tab of tabs; track tab.id) {
          <button
            (click)="selectTab(tab.id)"
            type="button"
            role="tab"
            [attr.aria-selected]="activeTab === tab.id"
            [attr.aria-controls]="tab.id + '-panel'"
            class="py-2 sm:py-3 text-xs sm:text-sm font-semibold text-[var(--text)] transition-colors duration-200 truncate"
            [class.bg-[#A3CBE1]]="tab.id === 'description'"
            [class.bg-[#F3EDE5]]="tab.id === 'composition'"
            [class.bg-[#A9CBA3]]="tab.id === 'guide'"
            [class.bg-[#E7A861]]="tab.id === 'faq'">
            {{ tab.title | translate }}
          </button>
        }
      </div>

      <!-- Tab Content -->
      <div
        [id]="activeTab + '-panel'"
        role="tabpanel"
        class="p-4 sm:p-6 text-sm text-[var(--text)] rounded-b-xl overflow-hidden break-words leading-relaxed"
        [class.bg-[#A3CBE1]]="activeTab === 'description'"
        [class.bg-[#F3EDE5]]="activeTab === 'composition'"
        [class.bg-[#A9CBA3]]="activeTab === 'guide'"
        [class.bg-[#E7A861]]="activeTab === 'faq'">
        
        @switch (activeTab) {
          @case ('description') {
            <div class="space-y-4 break-words">
              <quill-view-html class="whitespace-pre-wrap break-words" [content]="prod.description"></quill-view-html>
            </div>
          }
          @case ('composition') {
            <div class="space-y-4 break-words">
              <quill-view-html class="whitespace-pre-wrap break-words" [content]="prod.composition"></quill-view-html>
            </div>
          }
          @case ('guide') {
            <div class="space-y-2 break-words">
              <quill-view-html class="whitespace-pre-wrap break-words" [content]="prod.guide"></quill-view-html>
            </div>
          }
          @case ('faq') {
            <div class="space-y-2 break-words">
              <quill-view-html class="whitespace-pre-wrap break-words" [content]="prod.faq"></quill-view-html>
            </div>
          }
        }
      </div>
    </section>
}
    <!-- Review Section -->
     @if(activeProductDetailsReviewsSections()){
       
   
    <section class="w-full bg-[#F3EDE5] pt-4 sm:pt-6 rounded-lg px-4 sm:px-6 lg:px-8">
      <h2 class="text-xl sm:text-2xl font-bold uppercase text-[var(--text)] mb-4 text-center">
        {{ 'PRODUCT_DETAILS.REVIEWS_SECTION_TITLE' | translate }}
      </h2>

      <!-- Icon -->
        <div class="flex justify-center mb-2">
      <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect width="90" height="90" fill="url(#pattern0_61_552)"/>
<defs>
<pattern id="pattern0_61_552" patternContentUnits="objectBoundingBox" width="1" height="1">
<use xlink:href="#image0_61_552" transform="scale(0.0111111)"/>
</pattern>
<image id="image0_61_552" width="90" height="90" preserveAspectRatio="none" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFN0lEQVR4nO2cXYhVVRTHf6OjlRTTpPZpQZPUSyCXKIqwsJKy7CUaKJLQHpoiiqIHg6KcasyCDHsorNS+BMGHeuhFH7KbhWCQDVFU9qlUNupEZlk6zo4Na+Ay3XvnfOyPde/sH/xhuHPvuf+15sw++6yz9oZEIpFIJBKJRCKRSGSiE6gAS4F+4E3gI+BbYC8wDBwTDctr9nfb5b398tmKHCshTAWuBp6VZP0FGEeyx/oQWAXMl++aVEwBbgA2APsdJnYiDQHrgevFQ9tyBrAc+C5gchvJDjkrgNNpI2bJv+/fChI8Xv8Ca4GzaGFOAZ4BDitI6ET6E1gJnEyLcRPwk4IEmpz6GbiFFuA0YLOChJmS2gR0o5SKkgudcST7H3kZyrgLOKIgOcaxbEzLUMJyBQkxnmVnTdHoAJ5TkAQTSGsk5uBMpiQbkZ0CBqVPQdAmku4PleTFwIiCgE0k2dhv9J3kc4ADkQP9RhTTw5DP23Zb8Xo/coDvyQWpQ36O6WWrryrgA5EDMzJsjbFYgZ97XSe5W8GQ8TswvcbTNOBgZE/2+2e6TPSLCs6e9XV8bVDga7XLC+BRBQEtquNtkZKa9tkuEr1SQTDD44aN2uEj9pBm9WTZJJ+kJJBXmnh8VYE/O907sUyib1cQhAEWNvG4UIE/q94yid6k5GzpbOLRthH8psDnW0WTPE2mVLEDeCmD15cV+DxYtGnnSgXmDbAgg9cFCnxaXVEk0fd5MDIK3APMBXpq1F1HMwp4ntHgWLXfNVfu6Ea13Cmu9WDkU/TwmYf47BCWm489jWNziM8cmZu7js/2D+ZmtwcjRmYRtv8tFnY8/8VTbF8XMTTkyYyR8XGNzGxCMVX67Xw+tNhXxNg/Hg0ZUVVqKSEaLLcGiMfmLDeh+jT2e340dC3wa6BYbM5y42scM4GGkk4ZKo4HjMP+QXPzRUCDRrQTON9Bks+VGUBo/18VMRvDqJEm8TKNKh1yjBjet2u5YTEZ9A7leVdxXeZ/3B3J7FIHiV4WybstL+TmkghGR2QpRllmRWryKVRUso+O/ghstIo7qq1SJkWK2SHNPugw0Q8F9v5GGbM3BzbbM4GfTlkd25/h7OkJ7P3WMok+wVOVy9TR4AReLgB21Lx/h7zWjMFA3vdJrlqi3WBFEw+9DR6rHZLZUSP6FXjPzOxAawUrJVZ5bZb3jqcSqIHGWWfpas9m99S5G7wm5x3eXvlMLR1ybJ/en8chsz030gzWJHq6LNsoUgw6Lp8d62qyx/zco29bsz8Vx9zp+cxYJ9+xy8Gxdsmx1nn2bJeYeGGLZ+OmhbTF5yqt85R0BZnIsjk4E8/MV9LGayLpmGzsEoRY1TGjQLaxKCihbgaMIj1FJCbDOnBTsx48yhLlMR7x1MdmlGhUTigV9Mp2OabNdMTREx+nXAR8qSA5xpF+BC5FKfMUJMg40NtAF4q5UEGSTAl9H3KOXIaLFSTLFNAhma4WaX6PgpblGCajDsu+qE6XGYfgDgXJMxm0W6ZsLlobovC0giSaJoWg14DrYt94uCBWv56pIzuv3wYMyJDWNjvszpTKVpHGkwHgKlkxdTlwG/AY8Lps1G07W3+QJ/JHazbq3iPLGary3iek4D+vnfeLfrRAkre129bCvukq8EBgY4MdCxJN2JizSLOqHS5IoXk45wWqN7bhVmNKzi6maobeusQ47Mzgkxzz1752ml6F4vGMhf4D8uinK7bhVqXZHh4jMkT0tVKBRisD0tg3LDWDD4AXgCWyQjWRSCQSiUQiQSz+A0RDXd8Vt6QpAAAAAElFTkSuQmCC"/>
</defs>
</svg>

  </div>

      <!-- Subtitle -->
      <p class="text-[var(--text)] mb-4 sm:mb-6 text-center text-sm sm:text-base">
        {{ 'PRODUCT_DETAILS.REVIEWS_SECTION_SUBTITLE' | translate }}
      </p>

      <!-- Write Review Section -->
      <div class="mb-6 sm:mb-8 w-full space-y-6 sm:space-y-8">
        <!-- Toggle Review Form Button -->
        <div class="text-center">
          <button 
            type="button"
            (click)="showReviewForm = !showReviewForm"
            class="mb-6 sm:mb-8 bg-[var(--primary)] text-white px-4 sm:px-6 py-2 sm:py-3 rounded-md text-sm sm:text-base touch-manipulation hover:bg-opacity-90 transition-colors">
            @if (showReviewForm) {
              {{ 'PRODUCT_DETAILS.CANCEL' | translate }}
            } @else {
              @if (totalElements > 0) {
                {{ 'PRODUCT_DETAILS.WRITE_REVIEW' | translate }}
              } @else {
                {{ 'PRODUCT_DETAILS.FIRST_REVIEW' | translate }}
              }
            }
          </button>
        </div>

        <!-- Review Form -->
        @if (showReviewForm) {
          <form class="p-4 sm:p-6 rounded-lg shadow-sm mb-6 sm:mb-8 bg-[#F3EDE5]" 
      (ngSubmit)="submitReview()" 
      #reviewForm="ngForm"
      novalidate>
            <h3 class="text-base sm:text-lg font-medium mb-4">
              {{ 'PRODUCT_DETAILS.WRITE_YOUR_REVIEW' | translate }}
            </h3>

            <!-- Rating Input -->
            <div class="flex items-center mb-4 flex-wrap gap-2">
              <span class="text-sm sm:text-base">{{ 'PRODUCT_DETAILS.RATING' | translate }}</span>
              <div class="flex" role="group" aria-label="Rating">
                @for (star of [1, 2, 3, 4, 5]; track star) {
                  <button 
                    type="button"
                    (click)="newReview.note = star"
                    [attr.aria-label]="star + ' stars'"
                    class="text-2xl focus:outline-none focus:ring-2 focus:ring-[var(--primary)] rounded touch-manipulation p-1">
                    <svg 
                      class="w-5 h-5 sm:w-6 sm:h-6 transition-colors" 
                      [class.text-[var(--primary)]]="star <= newReview.note" 
                      [class.text-gray-300]="star > newReview.note" 
                      fill="currentColor" 
                      viewBox="0 0 20 20">
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                  </button>
                }
              </div>
            </div>

            <!-- Review Text -->
            <div class="mb-4">
              <label for="review-text" class="block text-sm font-medium mb-2">
                {{ 'PRODUCT_DETAILS.YOUR_REVIEW' | translate }}
              </label>
              <textarea 
                id="review-text" 
                [(ngModel)]="newReview.commentaire"
                name="commentaire"
                required
                class="w-full px-3 py-2 border border-[var(--surface)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary)] bg-[var(--background)] text-[var(--text)] text-sm sm:text-base"
                rows="4"
                [placeholder]="'PRODUCT_DETAILS.PLACEHOLDER_REVIEW' | translate">
              </textarea>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              class="bg-[var(--primary)] text-white px-4 sm:px-6 py-2 rounded-md hover:bg-opacity-90 transition-colors text-sm sm:text-base touch-manipulation disabled:opacity-50 disabled:cursor-not-allowed"
              [disabled]="!newReview.note || !newReview.commentaire.trim()">
              {{ 'PRODUCT_DETAILS.SUBMIT_REVIEW' | translate }}
            </button>
          </form>
        }

        <!-- Reviews List -->
        @if (isLoadingReviews) {
          <div class="text-center py-8">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--primary)]" role="status">
              <span class="sr-only">Loading...</span>
            </div>
          </div>
        } @else if (allReviews().length > 0) {
            <!-- Scrollable Reviews Container -->
<div 
  class="w-full max-h-[500px] sm:max-h-[400px] overflow-y-auto pr-2 sm:pr-4 -mr-2 sm:-mr-4 scrollbar-thin scrollbar-thumb-[var(--primary)] scrollbar-track-[var(--surface)]"
  role="feed"
  aria-busy="false"
  aria-label="Product reviews">
  @for (review of allReviews(); track review.id) {
    <article class="pl-2 sm:pl-4 mb-4 sm:mb-6 pb-4 border-b border-gray-200 last:border-b-0">
                  <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-2 sm:mb-3">
                    <app-rating 
                      [rating]="review.note" 
                      [reviewCount]="undefined">
                    </app-rating>
                    <time 
                      [dateTime]="review.datePublication" 
                      class="text-xs sm:text-sm text-[var(--text)] opacity-70">
                      {{ review.datePublication | date: 'medium' }}
                    </time>
                  </div>
                  <h4 class="font-medium text-base sm:text-lg mb-1 text-[var(--text)]">
                    {{ review.utilisateur.nom || 'Anonymous' }}
                  </h4>
                  <app-expand-long-text 
                    [text]="review.commentaire" 
                    [id]="review.id">
                  </app-expand-long-text>
                </article>
              }
            
          

          <!-- Pagination -->
          <app-pagination
          class="sticky bottom-0 "
            [currentPage]="pagination().page"
            [itemsPerPage]="pagination().size"
            [totalItems]="totalElements"
            (pageChange)="onPageChange($event)">
          </app-pagination>
          </div>
        } @else {
          <p class="text-center text-[var(--text)] opacity-70 py-8">
            {{ 'PRODUCT_DETAILS.NO_REVIEWS' | translate }}
          </p>
        }
      </div>
    </section>
  }
  <!-- CONTENT1 Section-->
   
    <!-- Recommended Products Section -->
             <app-recommanded-products></app-recommanded-products>
  </div>

}