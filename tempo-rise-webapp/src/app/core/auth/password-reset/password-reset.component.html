<div class="min-h-screen flex items-center justify-center p-4 bg-[var(--background)]">
    <div class="w-full max-w-md p-8 rounded-lg shadow-lg bg-[var(--surface)]">
      <h2 class="text-2xl font-bold mb-6 text-center text-[var(--primary)]">Reset Password</h2>
      
      @if (!tokenChecked) {
        <div class="text-center">Validating token...</div>
      }
      @else if (!tokenValid) {
        <div class="p-4 rounded bg-red-100 text-red-800">
          {{ errorMessage || 'Invalid reset link' }}
        </div>
        <div class="mt-4 text-center">
          <a [routerLink]="['/reset-request']" class="text-sm underline text-[var(--primary)]">
            Request new reset link
          </a>
        </div>
      }
      @else {
        <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="space-y-4">
          <div>
            <label for="password" class="block text-sm font-medium mb-1 text-[var(--text)]">New Password</label>
            <input 
              id="password" 
              type="password" 
              formControlName="password"
              class="w-full px-4 py-2 rounded border focus:outline-none focus:ring-2 bg-[var(--background)] border-[var(--secondary)] text-[var(--text)] focus:ring-[var(--primary)]"
            >
              @if (resetForm.get('password')?.invalid && 
     (resetForm.get('password')?.dirty || resetForm.get('password')?.touched)) {
  <div class="mt-1 text-xs sm:text-sm text-red-600">
    @if (resetForm.get('password')?.errors?.['required']) {
      <p>Password is required</p>
    }
    @if (resetForm.get('password')?.errors?.['minlength']) {
      <p>Password must be at least 8 characters</p>
    }
    @if (resetForm.get('password')?.errors?.['pattern']) {
      <p>
        Password must be at least 8 characters long and contain at least one uppercase letter, 
        one number, and one special character
      </p>
    }
  </div>
}
          </div>
  
          <div>
            <label for="confirmPassword" class="block text-sm font-medium mb-1 text-[var(--text)]">Confirm Password</label>
            <input 
              id="confirmPassword" 
              type="password" 
              formControlName="confirmPassword"
              class="w-full px-4 py-2 rounded border focus:outline-none focus:ring-2 bg-[var(--background)] border-[var(--secondary)] text-[var(--text)] focus:ring-[var(--primary)]"
            >
            @if (resetForm.get('password')?.invalid && 
     (resetForm.get('password')?.dirty || resetForm.get('password')?.touched)) {
        <div class="mt-1 text-xs sm:text-sm text-red-600">

            @if (resetForm.get('confirmPassword')?.errors?.['required']) {
            <p>Password is required</p>
          }
            @if (resetForm.hasError('mismatch') && resetForm.get('confirmPassword')?.touched) {
              <div class="text-red-500 text-sm mt-1">
                Passwords do not match
              </div>
            }
        </div>
          }
          </div>
  
          <button 
            type="submit" 
            [disabled]="resetForm.invalid || isLoading"
            class="w-full py-2 px-4 rounded font-medium transition-colors bg-[var(--primary)] text-white disabled:opacity-70 disabled:cursor-not-allowed"
          >
            @if (isLoading) {
              <span>Resetting...</span>
            } @else {
              <span>Reset Password</span>
            }
          </button>
  
          @if (errorMessage) {
            <div class="p-3 rounded text-sm bg-red-100 text-[var(--text)]">
              {{ errorMessage }}
            </div>
          }
          @if (successMessage) {
            <div class="p-3 rounded text-sm bg-green-100 text-[var(--text)]">
              {{ successMessage }}
            </div>
          }
        </form>
      }
    </div>
  </div>